<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <?= $title ?? 'H2CMS' ?> - H2CMS
    </title>
    <link rel="stylesheet" href="/static/css/front.css">
    <script>
        // é¡µé¢åŠ è½½å‰ç«‹å³åº”ç”¨æš—è‰²æ¨¡å¼ï¼Œé¿å…é—ªçƒ
        if (localStorage.getItem('h2cms_dark') === '1') {
            document.documentElement.style.background = '#0f172a';
        }
    </script>
</head>

<body>
    <script>
        // ç«‹å³è®¾ç½® dark class
        if (localStorage.getItem('h2cms_dark') === '1') {
            document.body.classList.add('dark');
        }
        function toggleDark() {
            var isDark = document.body.classList.toggle('dark');
            localStorage.setItem('h2cms_dark', isDark ? '1' : '0');
            document.getElementById('darkToggle').textContent = isDark ? 'â˜€ï¸' : 'ğŸŒ™';
            document.documentElement.style.background = isDark ? '#0f172a' : '';
        }
        // åˆå§‹åŒ–æŒ‰é’®å›¾æ ‡
        document.addEventListener('DOMContentLoaded', function () {
            var btn = document.getElementById('darkToggle');
            if (btn && document.body.classList.contains('dark')) btn.textContent = 'â˜€ï¸';
        });
    </script>
    <?php $this->partial('front-nav') ?>

    <?php if (!empty($_SESSION['_flash'])): ?>
    <?php $flashes = $_SESSION['_flash']; unset($_SESSION['_flash']); ?>
    <div class="container" style="margin-top:1rem">
        <?php foreach ($flashes as $type => $msg): ?>
        <div class="alert alert-<?= $type ?>">
            <?= htmlspecialchars($msg) ?>
        </div>
        <?php endforeach; ?>
    </div>
    <?php endif; ?>

    <div class="container main-content">
        <?= $content ?>
    </div>

    <?php $this->partial('footer') ?>
</body>

</html>